{"id":"index.html","dependencies":[{"name":"C:\\Users\\rtroe\\Desktop\\FS2\\package.json","includedInParent":true,"mtime":1532024240387},{"name":"./static\\css\\style.css","dynamic":true,"parent":"C:\\Users\\rtroe\\Desktop\\FS2\\index.html","resolved":"C:\\Users\\rtroe\\Desktop\\FS2\\static\\css\\style.css"},{"name":"./static\\media\\black-plane.png","dynamic":true,"parent":"C:\\Users\\rtroe\\Desktop\\FS2\\index.html","resolved":"C:\\Users\\rtroe\\Desktop\\FS2\\static\\media\\black-plane.png"},{"name":"./index.js","dynamic":true,"parent":"C:\\Users\\rtroe\\Desktop\\FS2\\index.html","resolved":"C:\\Users\\rtroe\\Desktop\\FS2\\index.js"}],"generated":{"html":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <title>Flugsuche</title>\r\n  <link rel=\"stylesheet\" href=\"/5da6cac77a25b9c6efda55a5d0aa7417.css\">\r\n\r\n  <!-- External OpenLayers Sources -->\r\n  <script src=\"https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.0.3/build/ol.js\" type=\"text/javascript\"></script>\r\n  <script src=\"https://api.mapbox.com/mapbox.js/plugins/arc.js/v0.1.0/arc.js\"></script>\r\n  <link rel=\"stylesheet\" href=\"https://openlayers.org/en/v5.0.3/css/ol.css\" type=\"text/css\">\r\n  <script src=\"https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL\"></script>\r\n  <script src=\"https://code.jquery.com/jquery-2.2.3.min.js\"></script>\r\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\">\r\n  <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\r\n  <script src=\"https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL\"></script>\r\n\r\n</head>\r\n\r\n<body>\r\n\r\n  <div id=\"waitOverlayWrapper\" style=\"display: none;\">\r\n    <div id=\"waitOverlayContent\">\r\n      <img src=\"/4132e5bf46911c6de42af458220f678e.png\" id=\"waitPlane\">\r\n\r\n      <p class=\"text-center\" style=\"margin-top:2.8em;\">\r\n        Bitte warten...\r\n      </p>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"headerBar\">\r\n    <form action=\"http://flights.eliashenrich.de/form.php\" method=\"POST\" class=\"text-center\" onsubmit=\"return showOverlay()\">\r\n      von\r\n      <input type=\"text\" name=\"origin\" value=\"SYD\" placeholder=\"von\" class=\"text-center\" id=\"from\"> nach\r\n      <input type=\"text\" name=\"destination\" value=\"LAX\" placeholder=\"nach\" class=\"text-center\" id=\"to\">\r\n      <input type=\"submit\" value=\"Suchen\">\r\n    </form>\r\n  </div>\r\n\r\n  <div class=\"contentWrapper\">\r\n    <div class=\"contentLeft\">\r\n      <h1>\r\n                Ihre Flüge:\r\n      </h1>\r\n\r\n      <ul class=\"flightList\" id=\"flightList\">\r\n        <li class=\"hidden\" id=\"listDummyRoute\">\r\n          <span class=\"flightFrom\"></span> -> <span class=\"flightTo\"></span>\r\n          <span class=\"timeDeparture\">13:00</span> <span class=\"timeArrival\">17:00</span>\r\n           Lat: <span class=\"latFrom\"></span> Lon: <span class=\"lonFrom\"></span>\r\n           Lat: <span class=\"latTo\"></span> Lon: <span class=\"lonTo\"></span>\r\n        </li>\r\n      </ul>\r\n\r\n    </div>\r\n    <div class=\"contentRight\">\r\n      <h1>\r\n                Unsere Flugrouten:\r\n      </h1>\r\n      <div id=\"map-container\" class=\"map-container\"><div id=\"info\"></div></div>\r\n\r\n      <ul class=\"airportList\" id=\"airportList\">\r\n        <li class=\"hidden\" id=\"listDummyAirport\">\r\n          ID: <span class=\"airportId\"></span> /\r\n          Kürzel: <span class=\"airportCode\"></span> /\r\n          Name: <span class=\"airportName\"></span> /\r\n          Position (<span class=\"airportLat\"></span>,\r\n          <span class=\"airportLon\"></span>)\r\n        </li>\r\n      </ul>\r\n\r\n    </div>\r\n  </div>\r\n  <script>\r\n      /*** Main Script ***/\r\n      var flightSearch = new FlightSearchAPI();\r\n      var params = {\r\n          from: document.getElementById('from').value,\r\n          to: document.getElementById('to').value\r\n      };\r\n      // Display All available airports\r\n      flightSearch.requestAPI('/airports/all', params, successCallback);\r\n\r\n      //------------------------------------------------------------------------------\r\n\r\n      /** API functions **/\r\n      function FlightSearchAPI() {\r\n          this.endpoint = 'http://flights.eliashenrich.de/api.php';\r\n\r\n          this.requestAPI = function(action, data, callback) {\r\n              var url = this.endpoint + '?action=' + action;\r\n\r\n              var keys = Object.keys(data);\r\n              for (var i = 0; i < keys.length; i++) {\r\n                  var paramName = keys[i];\r\n                  var paramValue = data[keys[i]];\r\n\r\n                  url += \"&\" + paramName + \"=\" + paramValue;\r\n              }\r\n\r\n              var request = new XMLHttpRequest();\r\n\r\n              request.onreadystatechange = function() {\r\n                  console.log(\"Status hat sich geändert\", this.readyState);\r\n\r\n                  // Ist die Anfrage beendet?\r\n                  if (this.readyState === 4) {\r\n                      // Http-Statuscode prüfen\r\n                      if (this.status === 200) {\r\n                          console.log(\"Anfrage erfolgreich: \" + action);\r\n                          console.log(this.responseText);\r\n\r\n                          callback(this.responseText, action);\r\n                      }\r\n                  }\r\n              };\r\n\r\n              request.open('GET', url, true);\r\n              request.send();\r\n          };\r\n      }\r\n\r\n      function successCallback(data, action) {\r\n          var response = JSON.parse(data);\r\n\r\n          if (action == '/route/find') {\r\n              for (var i = 0; i < response.length; i++) {\r\n                  var flug = response[i];\r\n\r\n                  console.log(\"Flug \" + i);\r\n\r\n                  for (var j = 0; j < flug.length; j++) {\r\n                      var leg = flug[j];\r\n\r\n                      console.log(\"Leg \" + j, leg);\r\n\r\n                      var airportFrom = leg.airportFrom.CityName;\r\n                      var airportTo = leg.airportTo.CityName;\r\n                      var latFrom = leg.airportFrom.PositionLat;\r\n                      var lonFrom = leg.airportFrom.PositionLon;\r\n                      var latTo = leg.airportTo.PositionLat;\r\n                      var lonTo = leg.airportTo.PositionLon;\r\n                      if(leg.schedule[j]){\r\n                          var depTime = leg.schedule[j].ScheduledDepartureTime;\r\n                          var arrTime = leg.schedule[j].ScheduledArrivalTime;\r\n                      }\r\n\r\n                      addListItemRoute(airportFrom, latFrom, lonFrom, airportTo, latTo, lonTo, depTime, arrTime);\r\n                  }\r\n              }\r\n          }\r\n\r\n          if (action == '/airports/all') {\r\n              if (response) {\r\n                  var result = {};\r\n\r\n                  for (var i = 0; i < response.data.length; i++) {\r\n                      var obj = response.data[i];\r\n                      addListItemAirport(obj.Id, obj.CodeIATA, obj.CityName, obj.PositionLat, obj.PositionLon)\r\n                  }\r\n              }\r\n          }\r\n      }\r\n\r\n      //------------------------------------------------------------------------------\r\n\r\n      /*** General functions ***/\r\n      function showOverlay() {\r\n          var params = {\r\n              from: document.getElementById('from').value,\r\n              to: document.getElementById('to').value\r\n          };\r\n          var start = mapAirportCodeToName(params.from);\r\n          var startId = mapAirportCodeToId(params.from);\r\n          var destination = mapAirportCodeToName(params.to);\r\n          var destinationId = mapAirportCodeToId(params.to);\r\n          var startLon = mapAirportCodeToLon(params.from);\r\n          var startLat = mapAirportCodeToLat(params.from);\r\n          var destinationLon = mapAirportCodeToLon(params.to);\r\n          var destinationLat = mapAirportCodeToLat(params.to);\r\n          params.from = startId;\r\n          params.to = destinationId;\r\n          //console.log(\"startLon\"+startLon+\"startLat\"+startLat+\"destinationLon\"+destinationLon+\"destinationLat\"+destinationLat);\r\n\r\n          // Get Routes between aiports\r\n          flightSearch.requestAPI('/route/find', params, successCallback);\r\n          return false;\r\n\r\n          var element = document.getElementById('waitOverlayWrapper');\r\n          element.style.display = \"block\";\r\n          return false;\r\n      }\r\n\r\n      function hideOverlay() {\r\n          var element = document.getElementById('waitOverlayWrapper');\r\n          element.style.display = 'none';\r\n      }\r\n\r\n      function addListItemRoute(airportFrom, latFrom, lonFrom, airportTo, latTo, lonTo, departureTime, arrivalTime) {\r\n\r\n          var listItem = document.getElementById('listDummyRoute');\r\n\r\n          // Listenelement klonen und neu einfügen\r\n          var newListItem = listItem.cloneNode(true);\r\n          newListItem.setAttribute('id', '');\r\n          newListItem.classList.remove('hidden');\r\n\r\n\r\n          // Kindelement des neuen Knotens bearbeiten\r\n          newListItem.getElementsByClassName('flightFrom')[0].innerText = airportFrom;\r\n          newListItem.getElementsByClassName('latFrom')[0].innerText = latFrom;\r\n          newListItem.getElementsByClassName('lonFrom')[0].innerText = lonFrom;\r\n          newListItem.getElementsByClassName('flightTo')[0].innerText = airportTo;\r\n          newListItem.getElementsByClassName('latTo')[0].innerText = latTo;\r\n          newListItem.getElementsByClassName('lonTo')[0].innerText = lonTo;\r\n          newListItem.getElementsByClassName('timeDeparture')[0].innerText = departureTime.substr(0, 5);\r\n          newListItem.getElementsByClassName('timeArrival')[0].innerText = arrivalTime.substr(0, 5);\r\n\r\n          document.getElementById('flightList').appendChild(newListItem);\r\n\r\n      }\r\n\r\n      function addListItemAirport(id, code, city, lat, lon) {\r\n\r\n          var listItem = document.getElementById('listDummyAirport');\r\n\r\n          // Listenelement klonen und neu einfügen\r\n          var newListItem = listItem.cloneNode(true);\r\n          newListItem.setAttribute('id', '');\r\n          newListItem.classList.remove('hidden');\r\n\r\n          // Kindelement des neuen Knotens bearbeiten\r\n          newListItem.getElementsByClassName('airportId')[0].innerText = id;\r\n          newListItem.getElementsByClassName('airportCode')[0].innerText = code;\r\n          newListItem.getElementsByClassName('airportName')[0].innerText = city;\r\n          newListItem.getElementsByClassName('airportLat')[0].innerText = lat;\r\n          newListItem.getElementsByClassName('airportLon')[0].innerText = lon;\r\n\r\n          document.getElementById('airportList').appendChild(newListItem);\r\n\r\n      }\r\n\r\n      function mapAirportCodeToName(code) {\r\n          code = code + \"\";\r\n          var result = \"\";\r\n\r\n          var airportCodes = document.getElementsByClassName('airportCode');\r\n          var airportNames = document.getElementsByClassName('airportName');\r\n\r\n          for (var i = 1; i < airportCodes.length; i++) {\r\n              if (airportCodes[i].innerText == code) {\r\n                  result = airportNames[i].innerText;\r\n              }\r\n          }\r\n          return result;\r\n      }\r\n\r\n      function mapAirportCodeToId(code) {\r\n          code = code + \"\";\r\n          var result = null;\r\n\r\n          var airportCodes = document.getElementsByClassName('airportCode');\r\n          var airportId = document.getElementsByClassName('airportId');\r\n\r\n          for (var i = 1; i < airportCodes.length; i++) {\r\n              if (airportCodes[i].innerText == code) {\r\n                  result = airportId[i].innerText;\r\n              }\r\n          }\r\n          return result;\r\n      }\r\n\r\n      function mapAirportCodeToLon(code) {\r\n          code = code + \"\";\r\n          var result = null;\r\n\r\n          var airportCodes = document.getElementsByClassName('airportCode');\r\n          var airportLon = document.getElementsByClassName('airportLon');\r\n\r\n          for (var i = 1; i < airportCodes.length; i++) {\r\n              if (airportCodes[i].innerText == code) {\r\n                  result = airportLon[i].innerText;\r\n              }\r\n          }\r\n          return result;\r\n      }\r\n\r\n      function mapAirportCodeToLat(code) {\r\n          code = code + \"\";\r\n          var result = null;\r\n\r\n          var airportCodes = document.getElementsByClassName('airportCode');\r\n          var airportLat = document.getElementsByClassName('airportLat');\r\n\r\n          for (var i = 1; i < airportCodes.length; i++) {\r\n              if (airportCodes[i].innerText == code) {\r\n                  result = airportLat[i].innerText;\r\n              }\r\n          }\r\n          return result;\r\n      }\r\n  </script>\r\n  <script src=\"/cc4cbc1e23fc6043801ecde5f3786f6c.js\"></script>\r\n\r\n</body>\r\n\r\n</html>"},"hash":"fd29a85bd4f6f90aba47c5266fbf4724","cacheData":{}}